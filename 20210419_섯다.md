<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
    const cardDeck = [
        {type: '피', month: 1},{type: '광',month: 1},
        {type: '피',month: 2},{type: '피',month: 2},
        {type: '피', month: 3},{type: '광',month: 3},
        {type: '피',month: 4},{type: '멍텅구리',month: 4},
        {type: '피',month: 5},{type: '피',month: 5},
        {type: '피',month: 6},{type: '피',month: 6},
        {type: '피',month: 7},{type: '돼지',month: 7},
        {type: '피',month: 8},{type: '광',month: 8},
        {type: '피',month: 9},{type: '쌍피',month: 9},
        {type: '피',month: 10},{type: '피',month: 10},
    ];

    class gameSetting {
        constructor(deck) {
            this.cardDeck = deck;
            this.playerHand = [];
        }
        
        shuffle() {
            this.cardDeck.sort(() => Math.random() - 0.5);
        }

        numberOfPlayer(nop) {
            
            for(var i = 1; i <= nop; i++) {
                
                this.playerHand.push([]);


            }
        }
    }
    

    class gameReady {
        constructor(deck, hand) {
            this.deck = deck;
            this.hand = hand;
            
        }

        cardGive() {
            this.hand.forEach( (init) => {
                init.push(this.deck.shift());
            });
            // this.hand[i][0].push(this.deck.shift());
        }
    }

    

    class gameRule { 
    constructor(hand){
        this.hand = hand;
    }
    
    familyInspect(nop) {
        for(var i = 0; i < nop; i++){
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 0) {
                if(this.hand[i][0].month === 4 && this.hand[i][1].month === 6 || this.hand[i][1].month === 4 && this.hand[i][0].month === 6) {
                    console.log(`player ${i+1} : `+"세륙");
                }
                else if(this.hand[i][0].month === 3 && this.hand[i][0].type === "광" && this.hand[i][1].month === 7 && this.hand[i][1].type === "돼지"
                ||
                this.hand[i][1].month === 3 && this.hand[i][1].type === "광" && this.hand[i][0].month === 7 && this.hand[i][0].type === "돼지") {
                    console.log(`player ${i+1} : `+"땡잡이");
                }
                else if(this.hand[i][0].month === 9 && this.hand[i][1].month === 1 || this.hand[i][0].month === 1 && this.hand[i][1].month === 9) {
                    console.log(`player ${i+1} : `+"구삥");
                } else {
                    console.log(`player ${i+1} : `+"망통");
                }
            } // month + month = 0 Family Inspect
            
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 1) {
                if(this.hand[i][0].month === 10 && this.hand[i][1].month === 1 || this.hand[i][0].month === 1 && this.hand[i][1].month === 10) {
                    console.log(`player ${i+1} : `+"장삥");
                } else if(this.hand[i][0].month === 4 && this.hand[i][1].month === 7 || this.hand[i][0].month === 7 && this.hand[i][1].month === 4) {
                    if(this.hand[i][0].type === "멍텅구리" && this.hand[i][1].type === "돼지" || this.hand[i][0].type === "돼지" && this.hand[i][1].type === "멍텅구리") {
                        console.log(`player ${i+1} : `+"암행어사");
                    } else {
                        console.log(`player ${i+1} : `+"한 끗");
                    }
                } else {
                    console.log(`player ${i+1} : `+"한 끗");
                }
            }
            
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 2)  console.log(`player ${i+1} : `+"두 끗");
            
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 3) {
                if(this.hand[i][0].month === 1 && this.hand[i][1].month === 2 || this.hand[i][0].month === 2 && this.hand[i][1] === 1)  console.log(`player ${i+1} : `+"알리");
                if(this.hand[i][0].month === 4 && this.hand[i][0].type === "멍텅구리" && this.hand[i][1].month === 9 && this.hand[i][1].type === "쌍피" ||
                this.hand[i][0].month === 9 && this.hand[i][0].type === "쌍피" && this.hand[i][1].month === 4 && this.hand[i][1].type === "멍텅구리")  console.log(`player ${i+1} : `+"사구파토-멍텅구리");
            
                if(this.hand[i][0].month === 4 && this.hand[i][1].month === 9 || this.hand[i][0].month === 9  && this.hand[i][1].month === 4){
                    if(this.hand[i][0].type === "쌍피" && this.hand[i][1].type === "멍텅구리" || this.hand[i][1].type === "쌍피" && this.hand[i][0].type === "멍텅구리") {
                        console.log(`player ${i+1} : `+"사구파토 - 멍텅구리");
                    } else {
                        console.log(`player ${i+1} : `+"사구파토");
                    }
                }
                else  console.log(`player ${i+1} : `+"세끗");
            }
            
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 9)  console.log(`player ${i+1} : `+"갑오");
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 5)  console.log(`player ${i+1} : `+"다섯 끗");
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 8)  console.log(`player ${i+1} : `+"여덟 끗");
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 7)  console.log(`player ${i+1} : `+"일곱 끗");
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 4)  console.log(`player ${i+1} : `+"네 끗");
            if((this.hand[i][0].month + this.hand[i][1].month) % 10 === 6)  console.log(`player ${i+1} : `+"여섯 끗");
        }
            
        }
    }

 
    
    const gameSet = new gameSetting(cardDeck);
    const readyGame = new gameReady(cardDeck,gameSet.playerHand);
    const Rule = new gameRule(gameSet.playerHand);

    gameSet.shuffle();
    gameSet.numberOfPlayer(2);
    console.log(gameSet.playerHand);
    readyGame.cardGive();
    readyGame.cardGive();// playerHand = [객체1]
    Rule.familyInspect(gameSet.playerHand.length);

    </script>
    
</body>
</html>
